import{_ as o,D as a,c as r,l,a as e,I as s,a1 as i,o as h}from"./chunks/framework.l4YVMdX-.js";const ks=JSON.parse('{"title":"站点规则","description":"","frontmatter":{"sidebarDepth":3},"headers":[],"relativePath":"cn/siterule.md","filePath":"cn/siterule.md","lastUpdated":1716657713000}'),d={name:"cn/siterule.md"},c=i("",6),u=l("strong",null,"type",-1),p=l("code",null,"String",-1),_=l("li",null,[l("strong",null,"description"),e(": 站点名称")],-1),k=l("h3",{id:"url",tabindex:"-1"},[e("url "),l("a",{class:"header-anchor",href:"#url","aria-label":'Permalink to "url"'},"​")],-1),g=l("strong",null,"type",-1),E=l("code",null,"XPath String",-1),m=l("code",null,"XPath",-1),f=l("li",null,[l("strong",null,"description"),e(": 匹配站点的正则表达式")],-1),y={id:"exampleurl",tabindex:"-1"},b=l("a",{class:"header-anchor",href:"#exampleurl","aria-label":'Permalink to "exampleUrl <Badge text="Optional" type="error" />"'},"​",-1),F=l("strong",null,"type",-1),x=l("code",null,"String",-1),S=l("li",null,[l("strong",null,"description"),e(": 地址范例")],-1),v=l("h3",{id:"enable",tabindex:"-1"},[e("enable "),l("a",{class:"header-anchor",href:"#enable","aria-label":'Permalink to "enable"'},"​")],-1),C=l("strong",null,"type",-1),P=l("code",null,"Boolean",-1),A=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"true")],-1),D=l("li",null,[l("strong",null,"description"),e(": 规则开关")],-1),T=l("h3",{id:"nextlink",tabindex:"-1"},[e("nextLink "),l("a",{class:"header-anchor",href:"#nextlink","aria-label":'Permalink to "nextLink"'},"​")],-1),B=l("p",null,[e("脚本依据"),l("code",null,"nextLink"),e("寻找"),l("code",null,"下一页"),e("的 URL，我们提供了多种方式：")],-1),j=l("p",null,[l("a",{href:"https://devhints.io/xpath",target:"_blank",rel:"noreferrer"},"XPath selector"),e("：拥有"),l("code",null,"href"),e("属性并指向下一页的元素 或 内容为下一页的元素")],-1),q=l("strong",null,"type",-1),N=l("code",null,"XPath String",-1),O=l("code",null,"XPath",-1),I=l("li",null,[l("strong",null,"example"),e(": "),l("code",null,'//div[@id="nav"]/a'),e(", "),l("code",null,'//div[@id="nav"]/a/@href'),e(",两者等效")],-1),J=l("p",null,[l("a",{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors",target:"_blank",rel:"noreferrer"},"CSS selector"),l("br")],-1),R=l("strong",null,"type",-1),w=l("code",null,"String",-1),V=l("li",null,[l("strong",null,"content"),e(": "),l("code",null,"css;${CSS selector}")],-1),L=l("li",null,[l("strong",null,"example"),e(": "),l("code",null,"css;div#nav>a")],-1),X=l("p",null,[l("a",{href:"./.html"},'"auto;"'),e("脚本会自动寻找所有"),l("code",null,"text()"),e("为“下一页”, “next page”等预定义的下一页文字且含有"),l("code",null,"href"),e("属性的"),l("code",null,"a"),e("的元素")],-1),W=l("strong",null,"type",-1),M=l("code",null,"String",-1),U=l("li",null,[l("strong",null,"content"),e(": "),l("code",null,"auto;"),e(" 无选项")],-1),z=l("p",null,[l("a",{href:"./.html"},"function"),e("返回值为下一页链接的"),l("code",null,"JS"),e("函数")],-1),H=l("strong",null,"type",-1),$=l("code",null,"JS function",-1),G=l("li",null,[l("strong",null,"content"),e(":")],-1),Y=i("",1),K=l("li",null,[l("p",null,[l("a",{href:"./.html"},"Array"),e("脚本会遍历所有元素并使用 "),l("span",{style:{color:"blue","font-weight":"bold"}},"以上方法"),e(" 直至找到下一页链接地址")])],-1),Q=l("a",{href:"./.html"},"Object",-1),Z=l("code",null,"hrefInc",-1),ll={id:"prevlink",tabindex:"-1"},el=l("a",{class:"header-anchor",href:"#prevlink","aria-label":'Permalink to "prevLink <Badge text="Optional" type="error" />"'},"​",-1),sl=l("p",null,[e("同"),l("a",{href:"#nextlink"},"nextLink"),e(", 然而基本没什么时候需要😂")],-1),nl=l("h3",{id:"pageelement",tabindex:"-1"},[e("pageElement "),l("a",{class:"header-anchor",href:"#pageelement","aria-label":'Permalink to "pageElement"'},"​")],-1),tl=l("p",null,[e("脚本根据"),l("code",null,"pageElement"),e("的定义查找自动翻页时拼接的元素。举个🌰，对于搜索引擎，"),l("code",null,"pageElement"),e("应为搜索的结果。 我们同样提供了以下方式：")],-1),il=l("p",null,[l("a",{href:"https://devhints.io/xpath",target:"_blank",rel:"noreferrer"},"XPath selector"),e("：拼接元素的"),l("code",null,"XPath selector")],-1),al=l("strong",null,"type",-1),ol=l("code",null,"XPath String",-1),rl=l("code",null,"XPath",-1),hl=l("li",null,[l("strong",null,"example"),e(": "),l("code",null,'//div[@id="content]')],-1),dl=l("p",null,[l("a",{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors",target:"_blank",rel:"noreferrer"},"CSS selector"),l("br")],-1),cl=l("strong",null,"type",-1),ul=l("code",null,"String",-1),pl=l("li",null,[l("strong",null,"content"),e(": "),l("code",null,"css;${CSS selector}")],-1),_l=l("li",null,[l("strong",null,"example"),e(": "),l("code",null,"css;div#content")],-1),kl=l("p",null,[l("a",{href:"./.html"},"function"),e("返回拼接元素的"),l("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection",target:"_blank",rel:"noreferrer"},"HTMLCollection"),e("的函数。 一个🌰是"),l("code",null,"WordPress"),e("的规则, 通过"),l("code",null,"JS"),e("函数我们可以判断一个页面是否是 post，如果不是就返回"),l("code",null,"null"),e("跳出脚本逻辑，如果是就返回 post 的内容。再一个🌰是某些漫画网站，我们可以使用"),l("code",null,"pageElement"),e("直接计算下一张图片的地址，从而避免加载无用的内容。")],-1),gl=l("strong",null,"type",-1),El=l("code",null,"JS function",-1),ml=l("li",null,[l("strong",null,"content"),e(":")],-1),fl=i("",1),yl=l("h2",{id:"规则的增强功能",tabindex:"-1"},[e("规则的增强功能 "),l("a",{class:"header-anchor",href:"#规则的增强功能","aria-label":'Permalink to "规则的增强功能"'},"​")],-1),bl=l("code",null,"key",-1),Fl=l("code",null,"autopager",-1),xl=l("code",null,"Object",-1),Sl=l("code",null,"autopager",-1),vl=l("code",null,"key",-1),Cl=l("code",null,"key",-1),Pl=l("h3",{id:"useiframe",tabindex:"-1"},[e("useiframe "),l("a",{class:"header-anchor",href:"#useiframe","aria-label":'Permalink to "useiframe"'},"​")],-1),Al=l("strong",null,"type",-1),Dl=l("code",null,"Boolean",-1),Tl=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"false")],-1),Bl=l("li",null,[l("strong",null,"description"),e(": 使用 iframe 读取内容而不使用"),l("a",{href:"https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",target:"_blank",rel:"noreferrer"},"XHR")],-1),jl=l("h3",{id:"iloaded",tabindex:"-1"},[e("iloaded "),l("a",{class:"header-anchor",href:"#iloaded","aria-label":'Permalink to "iloaded"'},"​")],-1),ql=l("strong",null,"type",-1),Nl=l("code",null,"Boolean",-1),Ol=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"false")],-1),Il=l("li",null,[l("strong",null,"description"),e(": 是否在 iframe 完全 load 后操作..否则在 DOM 完成后操作")],-1),Jl=l("h3",{id:"itimeout",tabindex:"-1"},[e("itimeout "),l("a",{class:"header-anchor",href:"#itimeout","aria-label":'Permalink to "itimeout"'},"​")],-1),Rl=l("strong",null,"type",-1),wl=l("code",null,"Number",-1),Vl=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"0")],-1),Ll=l("li",null,[l("strong",null,"description"),e(": "),l("code",null,"iloaded"),e("为"),l("code",null,"false"),e("时的延迟，单位为毫秒")],-1),Xl=l("h3",{id:"newiframe",tabindex:"-1"},[e("newIframe "),l("a",{class:"header-anchor",href:"#newiframe","aria-label":'Permalink to "newIframe"'},"​")],-1),Wl=l("strong",null,"type",-1),Ml=l("code",null,"Boolean",-1),Ul=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"false")],-1),zl=l("li",null,[l("strong",null,"description"),e(": 当翻当前页面+2 时是否新建一个"),l("code",null,"iframe"),e("，在部分情况下有奇效")],-1),Hl=l("h3",{id:"reload",tabindex:"-1"},[e("reload "),l("a",{class:"header-anchor",href:"#reload","aria-label":'Permalink to "reload"'},"​")],-1),$l=l("strong",null,"type",-1),Gl=l("code",null,"Boolean",-1),Yl=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"false")],-1),Kl=l("li",null,[l("strong",null,"description"),e(": 强制重载"),l("code",null,"iframe"),e("，在部分情况下有奇效")],-1),Ql=l("h3",{id:"force-enable",tabindex:"-1"},[e("force_enable "),l("a",{class:"header-anchor",href:"#force-enable","aria-label":'Permalink to "force_enable"'},"​")],-1),Zl=l("strong",null,"type",-1),le=l("code",null,"Boolean",-1),ee=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"false")],-1),se=l("li",null,[l("strong",null,"description"),e(": 如果实在难以找出"),l("a",{href:"#pageelement"},"pageElement"),e(",开启该选项会使整个页面被拼接上去")],-1),ne=l("h3",{id:"headers",tabindex:"-1"},[e("headers "),l("a",{class:"header-anchor",href:"#headers","aria-label":'Permalink to "headers"'},"​")],-1),te=l("strong",null,"type",-1),ie=l("code",null,"Object",-1),ae=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"{ Referer: <本页链接> }")],-1),oe=l("li",null,[l("strong",null,"description"),e(": 自定义请求下一页的 headers")],-1),re=l("h3",{id:"remain",tabindex:"-1"},[e("remain "),l("a",{class:"header-anchor",href:"#remain","aria-label":'Permalink to "remain"'},"​")],-1),he=l("strong",null,"type",-1),de=l("code",null,"Number",-1),ce=i("",2),ue=l("h3",{id:"maxpage",tabindex:"-1"},[e("maxpage "),l("a",{class:"header-anchor",href:"#maxpage","aria-label":'Permalink to "maxpage"'},"​")],-1),pe=l("strong",null,"type",-1),_e=l("code",null,"Number",-1),ke=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"99")],-1),ge=l("li",null,[l("strong",null,"description"),e(": 最多翻页次数")],-1),Ee=i("",4),me=l("strong",null,"type",-1),fe=l("code",null,"Int",-1),ye=l("li",null,[l("strong",null,"default"),e(": null")],-1),be=l("li",null,[l("strong",null,"description"),e(": 延迟通讯时间")],-1),Fe=l("p",null,"observer:",-1),xe=l("strong",null,"type",-1),Se=l("code",null,"Array",-1),ve=l("li",null,[l("strong",null,"default"),e(": null")],-1),Ce=l("li",null,[l("strong",null,"description"),e(": mutationObserver 监控的 element 的 selector")],-1),Pe=l("h3",{id:"ipages",tabindex:"-1"},[e("ipages "),l("a",{class:"header-anchor",href:"#ipages","aria-label":'Permalink to "ipages"'},"​")],-1),Ae=l("strong",null,"type",-1),De=l("code",null,"Array",-1),Te=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"[false,2]")],-1),Be=l("li",null,[l("strong",null,"description"),e(": 立即翻页,第一项是控制是否在脚本加载的时候立即翻第二项(必须小于 maxpage)的页数,比如"),l("code",null,"[true,3]"),e(".就是说 JS 加载后.立即翻 3 页。对于图站可以有😂的体验")],-1),je=l("h3",{id:"separator",tabindex:"-1"},[e("separator "),l("a",{class:"header-anchor",href:"#separator","aria-label":'Permalink to "separator"'},"​")],-1),qe=l("strong",null,"type",-1),Ne=l("code",null,"Boolean",-1),Oe=l("li",null,[l("strong",null,"default"),e(": "),l("code",null,"true")],-1),Ie=l("li",null,[l("strong",null,"description"),e(": 是否显示翻页导航栏")],-1),Je=l("h3",{id:"sepdivdom",tabindex:"-1"},[e("sepdivDom "),l("a",{class:"header-anchor",href:"#sepdivdom","aria-label":'Permalink to "sepdivDom"'},"​")],-1),Re=l("strong",null,"type",-1),we=l("code",null,"JS function",-1),Ve=l("li",null,[l("strong",null,"description"),e(": 对于部分页面，脚本自动添加的导航栏可能造成页面格式错乱。"),l("code",null,"sepdivDom"),e("定义了一个函数来生成合适的导航栏，该导航栏会被插入在最后一个"),l("a",{href:"#pageelement"},"pageElement"),e("之后。 一个例子是"),l("code",null,"小木虫-帖子")],-1),Le=l("li",null,[l("strong",null,"example")],-1),Xe=i("",2),We=l("strong",null,"type",-1),Me=l("code",null,"JS function",-1),Ue=l("li",null,[l("strong",null,"description"),e(": 一个作用于首页(i.e. 当前页面)的 js 函数，用于修正页面。接收"),l("code",null,"currentDocument"),e(", "),l("code",null,"currentWindow"),e("两个参数。 详情请查看"),l("a",{href:"#documentfilter"},"documentFilter (1)")],-1),ze=l("h3",{id:"documentfilter",tabindex:"-1"},[e("documentFilter "),l("a",{class:"header-anchor",href:"#documentfilter","aria-label":'Permalink to "documentFilter"'},"​")],-1),He=l("a",{href:"./.html"},"JS function",-1),$e=l("ul",null,[l("li",null,[l("strong",null,"description"),e(": 一个作用于预读内容整体的 js 函数，执行于预读内容被插入到当前页面前。可以用来修正预读内容(比如 csdn)、去除广告(比如很多 nsfw)、根据 XHR 结果生成页面内容而避免使用 iframe(比如 bl-novel)甚至生成新的内容(比如 m-team)。 理论上你可以用 js 实现对 DOM 静态内容的修改")]),l("li",null,[l("strong",null,"content"),e(": "),l("code",null,"function (currentDocument, nextPageLink) {return newDocument}")])],-1),Ge=l("li",null,[l("a",{href:"./.html"},'"startFilter"'),l("ul",null,[l("li",null,[l("strong",null,"description"),e(": 重复使用"),l("a",{href:"#startfilter"},"startFilter")])])],-1),Ye=l("h3",{id:"scriptfilter",tabindex:"-1"},[e("scriptFilter "),l("a",{class:"header-anchor",href:"#scriptfilter","aria-label":'Permalink to "scriptFilter"'},"​")],-1),Ke=l("strong",null,"type",-1),Qe=l("li",null,[l("strong",null,"description"),e(": 在将预读内容插入到当前页面之前，脚本默认会移除所有的"),l("code",null,"<script>"),e("元素。 如果你想保留某些"),l("code",null,"<script>"),e(", 可以讲 scriptFilter 设置为一个匹配 inline code 或者 src 的正则表达式。 可以参考站点 kongregate")],-1),Ze=l("h3",{id:"filter",tabindex:"-1"},[e("filter "),l("a",{class:"header-anchor",href:"#filter","aria-label":'Permalink to "filter"'},"​")],-1),ls=l("a",{href:"./.html"},"JS function",-1),es=l("ul",null,[l("li",null,[l("strong",null,"description"),e(": 一个作用预读内容 element 的 js 函数，执行于预读内容被插入到当前页面后。")]),l("li",null,[l("strong",null,"content"),e(": "),l("code",null,"function (pageElements) {return null}")])],-1),ss=l("h3",{id:"stylish",tabindex:"-1"},[e("stylish "),l("a",{class:"header-anchor",href:"#stylish","aria-label":'Permalink to "stylish"'},"​")],-1),ns=l("strong",null,"type",-1),ts=l("code",null,"String",-1),is=l("li",null,[l("strong",null,"description"),e(": 用于修正页面的"),l("a",{href:"https://www.w3schools.com/css/",target:"_blank",rel:"noreferrer"},"CSS 样式")],-1),as=i("",4);function os(rs,hs,ds,cs,us,ps){const n=a("Jbadge"),t=a("Badge");return h(),r("div",null,[c,l("ul",null,[l("li",null,[u,e(": "),p,e(),s(n)]),_]),k,l("ul",null,[l("li",null,[g,e(": "),E,s(n),e(", "),m,s(n,{json:!1})]),f]),l("h3",y,[e("exampleUrl "),s(t,{text:"Optional",type:"error"}),e(),b]),l("ul",null,[l("li",null,[F,e(": "),x,e(),s(n)]),S]),v,l("ul",null,[l("li",null,[C,e(": "),P,e(),s(t,{text:"Optional",type:"error"})]),A,D]),T,B,l("ol",null,[l("li",null,[j,l("ul",null,[l("li",null,[q,e(": "),N,e(),s(n),e(", "),O,e(),s(n,{json:!1})]),I])]),l("li",null,[J,l("ul",null,[l("li",null,[R,e(": "),w,e(),s(n)]),V,L])]),l("li",null,[X,l("ul",null,[l("li",null,[W,e(": "),M,e(),s(n)]),U])]),l("li",null,[z,l("ul",null,[l("li",null,[H,e(": "),$,e(),s(n,{json:!1})]),G]),Y]),K,l("li",null,[l("p",null,[Q,e("复杂模式，参照函数"),Z,s(n)])])]),l("h3",ll,[e("prevLink "),s(t,{text:"Optional",type:"error"}),e(),el]),sl,nl,tl,l("ol",null,[l("li",null,[il,l("ul",null,[l("li",null,[al,e(": "),ol,e(),s(n),e(", "),rl,e(),s(n,{json:!1})]),hl])]),l("li",null,[dl,l("ul",null,[l("li",null,[cl,e(": "),ul,e(),s(n)]),pl,_l])]),l("li",null,[kl,l("ul",null,[l("li",null,[gl,e(": "),El,e(),s(n,{json:!1})]),ml]),fl])]),yl,l("p",null,[e("除基本元素外，规则还可包含一个"),bl,e("为"),Fl,e("的"),xl,e("以实现增强功能。"),Sl,e("可包含以下"),vl,e("。所有"),Cl,e("都为"),s(t,{text:"Optional",type:"error"})]),Pl,l("ul",null,[l("li",null,[Al,e(": "),Dl,e(),s(n)]),Tl,Bl]),jl,l("ul",null,[l("li",null,[ql,e(": "),Nl,e(),s(n),s(t,{text:"useriframe: true",type:"error"})]),Ol,Il]),Jl,l("ul",null,[l("li",null,[Rl,e(": "),wl,e(),s(n),s(t,{text:"useriframe: true",type:"error"})]),Vl,Ll]),Xl,l("ul",null,[l("li",null,[Wl,e(": "),Ml,e(),s(n),s(t,{text:"useriframe: true",type:"error"})]),Ul,zl]),Hl,l("ul",null,[l("li",null,[$l,e(": "),Gl,e(),s(n),s(t,{text:"useriframe: true",type:"error"})]),Yl,Kl]),Ql,l("ul",null,[l("li",null,[Zl,e(": "),le,e(),s(n),e(),s(t,{text:"Not Recommend",type:"error"})]),ee,se]),ne,l("ul",null,[l("li",null,[te,e(": "),ie,e(),s(n)]),ae,oe]),re,l("ul",null,[l("li",null,[he,e(": "),de,e(),s(n)]),ce]),ue,l("ul",null,[l("li",null,[pe,e(": "),_e,e(),s(n)]),ke,ge]),Ee,l("ul",null,[l("li",null,[me,e(": "),fe,e(),s(n)]),ye,be]),Fe,l("ul",null,[l("li",null,[xe,e(": "),Se,e(),s(n)]),ve,Ce]),Pe,l("ul",null,[l("li",null,[Ae,e(": "),De,e(),s(n)]),Te,Be]),je,l("ul",null,[l("li",null,[qe,e(": "),Ne,e(),s(n)]),Oe,Ie]),Je,l("ul",null,[l("li",null,[Re,e(": "),we,e(),s(n,{json:!1})]),Ve,Le]),Xe,l("ul",null,[l("li",null,[We,e(": "),Me,e(),s(n,{json:!1})]),Ue]),ze,l("ol",null,[l("li",null,[He,e(),s(n,{json:!1}),$e]),Ge]),Ye,l("ul",null,[l("li",null,[Ke,e(": String "),s(n)]),Qe]),Ze,l("ol",null,[l("li",null,[ls,e(),s(n,{json:!1}),es])]),ss,l("ul",null,[l("li",null,[ns,e(": "),ts,e(),s(n)]),is]),as])}const gs=o(d,[["render",os]]);export{ks as __pageData,gs as default};
